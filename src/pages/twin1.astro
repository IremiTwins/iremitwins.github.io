---
// ============================================================
// src/pages/twin1.astro â€” Twin 1's Personal Page
// ============================================================
//
// This page shows Twin 1's projects, anime reviews, and game reviews.
//
// SECTIONS:
//   1. Projects       â€” Portfolio cards (same pattern as Twin 2)
//   2. Anime Reviews  â€” Cards pulled from twin1-anime-reviews collection
//   3. Game Reviews   â€” Cards pulled from twin1-game-reviews collection
//
// HOW TO ADD A REVIEW:
//   Create a new .md file in the matching content folder:
//     Anime â†’ src/content/twin1-anime-reviews/my-review.md
//     Games â†’ src/content/twin1-game-reviews/my-review.md
//   The review will appear here automatically at the next build.
//   See existing sample files for the required frontmatter format.
// ============================================================

import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// â”€â”€ Fetch reviews at build time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// getCollection() reads all .md files from the named folder.
// We filter out drafts and sort by date (newest first).

const animeReviews = (await getCollection('twin1-anime-reviews'))
  .filter(r => !r.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const gameReviews = (await getCollection('twin1-game-reviews'))
  .filter(r => !r.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout
  title="Twin 1 Projects â€” Iremi Twins"
  description="Projects and apps by Twin 1 of the Iremi Twins."
>
  <main>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 1: Projects
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="portfolio section" style="padding-top: 8rem;">
      <div class="container">

        <p class="section__label">// twin 1</p>
        <h2 class="section__title">Twin 1's <span class="highlight">Projects</span></h2>

        <div class="portfolio__grid">

          <!-- â”€â”€ Placeholder card 1 â”€â”€
               Replace with a real project when ready. Copy this
               block and update the type, title, description,
               links, and tech stack spans. -->
          <article class="project-card card" data-animate>
            <div class="project-card__header">
              <span class="project-card__type">Coming Soon</span>
              <div class="project-card__links"></div>
            </div>
            <h3>Project Name</h3>
            <p>Details about this project coming soon.</p>
            <div class="project-card__tech">
              <span>TBD</span>
            </div>
          </article>

          <!-- â”€â”€ Placeholder card 2 â”€â”€ -->
          <article class="project-card card" data-animate>
            <div class="project-card__header">
              <span class="project-card__type">Coming Soon</span>
              <div class="project-card__links"></div>
            </div>
            <h3>Project Name</h3>
            <p>Details about this project coming soon.</p>
            <div class="project-card__tech">
              <span>TBD</span>
            </div>
          </article>

          <!-- â”€â”€ Placeholder card 3 â”€â”€ -->
          <article class="project-card card" data-animate>
            <div class="project-card__header">
              <span class="project-card__type">Coming Soon</span>
              <div class="project-card__links"></div>
            </div>
            <h3>Project Name</h3>
            <p>Details about this project coming soon.</p>
            <div class="project-card__tech">
              <span>TBD</span>
            </div>
          </article>

        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 2: Anime Reviews
         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         Cards are auto-generated from .md files in:
           src/content/twin1-anime-reviews/

         Each card links to its full review page at:
           /twin1/twin1-anime-reviews/<slug>
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="anime-reviews">
      <div class="container">
        <p class="section__label">// anime reviews</p>
        <h2 class="section__title">Anime <span class="highlight">Reviews</span></h2>

        {animeReviews.length > 0 ? (
          <div class="review__grid">
            {animeReviews.map(review => {
              // Build arrays for rendering filled/empty stars
              const filled = Array.from({ length: review.data.rating }, (_, i) => i);
              const empty  = Array.from({ length: 5 - review.data.rating }, (_, i) => i);
              // Format date as "Feb 2026"
              const displayDate = review.data.date.toLocaleDateString('en-GB', {
                month: 'short', year: 'numeric',
              });
              return (
                <article class="review-card card" data-animate>
                  {/* Cover image â€” falls back to emoji placeholder if coverImage is empty */}
                  {review.data.coverImage ? (
                    <img src={review.data.coverImage} alt={review.data.title} class="review-card__cover" />
                  ) : (
                    <div class="review-card__cover--placeholder">ðŸŽ¬</div>
                  )}

                  {/* Star rating â€” filled stars in accent colour, empty ones muted */}
                  <div class="review-card__stars">
                    {filled.map(() => <span class="review-card__star--filled">â˜…</span>)}
                    {empty.map(() => <span class="review-card__star--empty">â˜…</span>)}
                  </div>

                  {/* Title â€” links to the full review page */}
                  <h3><a href={`/twin1/twin1-anime-reviews/${review.slug}`}>{review.data.title}</a></h3>

                  {/* Short description â€” clamped to 3 lines via CSS */}
                  <p class="review-card__desc">{review.data.description}</p>

                  {/* Review date */}
                  <span class="review-card__date">{displayDate}</span>
                </article>
              );
            })}
          </div>
        ) : (
          <p style="color: var(--clr-muted);">No anime reviews yet â€” check back soon!</p>
        )}
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 3: Video Game Reviews
         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         Cards are auto-generated from .md files in:
           src/content/twin1-game-reviews/

         Each card links to its full review page at:
           /twin1/twin1-game-reviews/<slug>
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="game-reviews">
      <div class="container">
        <p class="section__label">// game reviews</p>
        <h2 class="section__title">Video Game <span class="highlight">Reviews</span></h2>

        {gameReviews.length > 0 ? (
          <div class="review__grid">
            {gameReviews.map(review => {
              const filled = Array.from({ length: review.data.rating }, (_, i) => i);
              const empty  = Array.from({ length: 5 - review.data.rating }, (_, i) => i);
              const displayDate = review.data.date.toLocaleDateString('en-GB', {
                month: 'short', year: 'numeric',
              });
              return (
                <article class="review-card card" data-animate>
                  {/* Cover image â€” falls back to emoji placeholder if coverImage is empty */}
                  {review.data.coverImage ? (
                    <img src={review.data.coverImage} alt={review.data.title} class="review-card__cover" />
                  ) : (
                    <div class="review-card__cover--placeholder">ðŸŽ®</div>
                  )}

                  {/* Star rating */}
                  <div class="review-card__stars">
                    {filled.map(() => <span class="review-card__star--filled">â˜…</span>)}
                    {empty.map(() => <span class="review-card__star--empty">â˜…</span>)}
                  </div>

                  {/* Title â€” links to the full review page */}
                  <h3><a href={`/twin1/twin1-game-reviews/${review.slug}`}>{review.data.title}</a></h3>

                  {/* Short description â€” clamped to 3 lines via CSS */}
                  <p class="review-card__desc">{review.data.description}</p>

                  {/* Review date */}
                  <span class="review-card__date">{displayDate}</span>
                </article>
              );
            })}
          </div>
        ) : (
          <p style="color: var(--clr-muted);">No game reviews yet â€” check back soon!</p>
        )}
      </div>
    </section>

  </main>
</BaseLayout>
