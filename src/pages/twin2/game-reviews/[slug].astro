---
// ============================================================
// src/pages/twin2/game-reviews/[slug].astro
// ============================================================
//
// Dynamic route for individual game review pages.
// URL pattern: /twin2/game-reviews/<slug>
//
// Works the same way as blog/[slug].astro:
//   1. getStaticPaths() discovers all non-draft game reviews
//   2. Each slug gets its own pre-rendered HTML page
//   3. Adding a new .md to src/content/game-reviews/ auto-
//      creates a new page at the next build.
// ============================================================

import ReviewLayout from '../../../layouts/ReviewLayout.astro';
import { getCollection, getEntry } from 'astro:content';

export async function getStaticPaths() {
  const reviews = await getCollection('game-reviews', ({ data }) => !data.draft);
  return reviews.map(review => ({
    params: { slug: review.slug },
  }));
}

const { slug } = Astro.params;
const post = await getEntry('game-reviews', slug as string);
const { Content } = await post!.render();
---

<ReviewLayout post={post!} collectionName="game-reviews" backUrl="/twin2">
  <Content />
</ReviewLayout>
